# Amazon VPC

## 概要
- Virtual Private Cloudの略。
- AWSクラウド上での仮想アドレス空間である。
- CIDRが使用可能で、/16~/28で設定可能である。

## 主な機能/特徴
- **VPC**：AWSクラウド上の仮想アドレス空間であり、AWSリソースを論理的に隔離した環境で起動することができる。
- **サブネット**：VPC内にある仮想アドレス空間であり、実際のＡＷＳリソースを配置する空間である。サブネット作成時にAZを指定する必要がある
- **VPC Flow Logs**：ENIのIPトラフィック情報をキャプチャする機能であり、その情報をCloudWatch Logs、S3、Kinesis Data Firehoseに送信できる。Flow Logsで取得できる情報には、送信元IPアドレス、送信元ポート、送信先IPアドレス、送信先ポート、プロトコル、パケット数、バイト数などが含まれる。
- **VPC Peering**：VPC間をプライベートネットワークで接続することができる。異なるアカウントやリージョン間でも作成することができる。
- **VPC エンドポイント**：VPC内のサービスとVPC外のサービスとのプライベート接続を可能にするサービスである。インターネットに接続せずにVPC外のサービスと繋がりたいときなどに使用する。Gateway型とInterface型の二種類がある。
  - Gateway型：S3やDynamoDBに対応しており、料金は無料である
  - Interface型：50以上のサービスに対応している。インターフェースエンドポイントが作成されると、ENIとDNSが作成される。PrivateLinkという技術でENIとサービス間をプライベートに接続する。

## セキュリティグループとネットワークACL
|    |  セキュリティグループ  | ネットワークACL  |
| :--- | :--- | :--- |
|  設定単位  | インスタンス  | サブネット  |
|  通信ルール  | ・ルールの許可のみ設定 </br> ・ステートフル：Inの設定だけで、Outの設定に適用される | ・ルールの許可と拒否を設定 </br> ・ステートレス：通常のFWのように番号順にルールを明示的に設定|
|  デフォルト  | セキュリティグループ内通信のみ許可  | すべての数信を許可  |